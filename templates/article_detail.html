{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block content %}

    <div class="article-entry">
        <h2>{{ object.title }}</h2>
        <p> {{ object.author }} | {{  object.date }}</p>
        <p>{{object.body }}</p>
    </div>


<!-- Блок комментариев -->

    <hr>

    <h4>Комментарии</h4>

    {% for comment in article.comment_set.all %}
        <p class="mb-1">
            <span class="fw-bold">{{ comment.author }}</span> &middot;
            <span class="text-muted">{{ comment }}</span>
        </p>
    {% empty %}
        <p class="text-muted">Комментариев пока нет</p>
    {% endfor %}
    <hr>

<!-- Конец блока комментариев  -->


<!-- Блок для добавления комментария -->
<h4>Добавление комментария</h4>
<form action="" method="post">
    {% csrf_token %}
    {{ form|crispy }}
    <button class="btn btn-success ms-2" type="submit">Отправить комментарий</button>
</form>

<!-- Конец блока добавления комментария -->

    {% if article.author.pk == request.user.pk %}


        <div>
            <p>
                <a href="{% url 'article_edit' article.pk %}">Редактировать</a>
                <a href="{% url 'article_delete' article.pk %}">Удалить</a>
            </p>
            <p>Назад ко
                <a href="{% url 'article_list' %}">всем статьям</a>
            </p>
        </div>

    {% endif %}

{% endblock %}